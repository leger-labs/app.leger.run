{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/leger-labs/leger-schema/v0.1.0/schema.json",
  "title": "Leger Infrastructure Configuration Schema",
  "description": "Single source of truth for Podman Quadlet generation - v0.1.0",
  "schema_version": "0.1.0",
  "type": "object",
  "required": [
    "tailscale",
    "infrastructure",
    "features",
    "providers"
  ],
  "properties": {
    "tailscale": {
      "type": "object",
      "title": "Tailscale Configuration",
      "description": "Tailscale MagicDNS configuration for HTTPS access",
      "x-category": "Infrastructure",
      "x-display-order": 0,
      "required": [
        "full_hostname"
      ],
      "properties": {
        "full_hostname": {
          "type": "string",
          "title": "Tailscale MagicDNS Hostname",
          "description": "Your full Tailscale MagicDNS hostname (e.g., blueprint.tail8dd1.ts.net)",
          "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?\\.tail[a-z0-9]+\\.ts\\.net$",
          "x-display-order": 1,
          "examples": [
            "myserver.tail8dd1.ts.net",
            "blueprint.tail8dd1.ts.net",
            "llm-stack.tailabcd.ts.net"
          ]
        },
        "hostname": {
          "type": "string",
          "title": "Machine Hostname",
          "description": "The machine name portion (auto-extracted from full_hostname)",
          "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$",
          "x-display-order": 2,
          "x-readonly": true,
          "examples": [
            "blueprint",
            "myserver",
            "llm-stack"
          ]
        },
        "tailnet": {
          "type": "string",
          "title": "Tailnet Domain",
          "description": "The tailnet domain portion (auto-extracted from full_hostname)",
          "pattern": "^tail[a-z0-9]+\\.ts\\.net$",
          "x-display-order": 3,
          "x-readonly": true,
          "examples": [
            "tail8dd1.ts.net",
            "tailabcd.ts.net"
          ]
        }
      }
    },
    "infrastructure": {
      "type": "object",
      "description": "Service infrastructure configuration with defaults",
      "required": [
        "network",
        "services"
      ],
      "properties": {
        "network": {
          "type": "object",
          "title": "Network Configuration",
          "x-category": "Infrastructure",
          "x-display-order": 1,
          "properties": {
            "name": {
              "type": "string",
              "title": "Network Name",
              "default": "llm",
              "pattern": "^[a-z0-9-]+$"
            },
            "subnet": {
              "type": "string",
              "title": "Network Subnet",
              "default": "10.89.0.0/24",
              "pattern": "^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/\\d{1,2}$"
            }
          }
        },
        "services": {
          "type": "object",
          "title": "Service Infrastructure",
          "properties": {
            "caddy": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "caddy"
                },
                "hostname": {
                  "type": "string",
                  "default": "caddy"
                },
                "port": {
                  "type": "integer",
                  "default": 443,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 443,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "0.0.0.0",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "description": {
                  "type": "string",
                  "default": "Caddy Reverse Proxy for LLM Services"
                }
              }
            },
            "cockpit": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "cockpit"
                },
                "hostname": {
                  "type": "string",
                  "default": "host"
                },
                "port": {
                  "type": "integer",
                  "default": 9090,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 9090,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "cockpit",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "description": {
                  "type": "string",
                  "default": "Cockpit Web Console"
                }
              }
            },
            "openwebui": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "openwebui"
                },
                "hostname": {
                  "type": "string",
                  "default": "openwebui"
                },
                "port": {
                  "type": "integer",
                  "default": 8080,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 3000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "ai",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "volume": {
                  "type": "string",
                  "default": "openwebui.volume"
                },
                "websocket": {
                  "type": "boolean",
                  "default": true
                },
                "description": {
                  "type": "string",
                  "default": "Open WebUI - LLM Chat Interface"
                }
              }
            },
            "openwebui_postgres": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "openwebui-postgres"
                },
                "hostname": {
                  "type": "string",
                  "default": "openwebui-postgres"
                },
                "port": {
                  "type": "integer",
                  "default": 5432,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "default": null
                },
                "bind_address": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "volume": {
                  "type": "string",
                  "default": "openwebui-postgres.volume"
                },
                "db_name": {
                  "type": "string",
                  "default": "openwebui"
                },
                "db_user": {
                  "type": "string",
                  "default": "openwebui"
                },
                "description": {
                  "type": "string",
                  "default": "PostgreSQL for OpenWebUI"
                }
              }
            },
            "openwebui_redis": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "openwebui-redis"
                },
                "hostname": {
                  "type": "string",
                  "default": "openwebui-redis"
                },
                "port": {
                  "type": "integer",
                  "default": 6379,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "default": null
                },
                "bind_address": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "volume": {
                  "type": "string",
                  "default": "openwebui-redis.volume"
                },
                "description": {
                  "type": "string",
                  "default": "Redis for OpenWebUI"
                }
              }
            },
            "litellm": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "litellm"
                },
                "hostname": {
                  "type": "string",
                  "default": "litellm"
                },
                "port": {
                  "type": "integer",
                  "default": 4000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 4000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "llm",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "description": {
                  "type": "string",
                  "default": "LiteLLM - Unified LLM Proxy"
                }
              }
            },
            "litellm_postgres": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "litellm-postgres"
                },
                "hostname": {
                  "type": "string",
                  "default": "litellm-postgres"
                },
                "port": {
                  "type": "integer",
                  "default": 5432,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "default": null
                },
                "bind_address": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "volume": {
                  "type": "string",
                  "default": "litellm-postgres.volume"
                },
                "db_name": {
                  "type": "string",
                  "default": "litellm"
                },
                "db_user": {
                  "type": "string",
                  "default": "litellm"
                },
                "description": {
                  "type": "string",
                  "default": "PostgreSQL for LiteLLM"
                }
              }
            },
            "litellm_redis": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "litellm-redis"
                },
                "hostname": {
                  "type": "string",
                  "default": "litellm-redis"
                },
                "port": {
                  "type": "integer",
                  "default": 6379,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "default": null
                },
                "bind_address": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "volume": {
                  "type": "string",
                  "default": "litellm-redis.volume"
                },
                "description": {
                  "type": "string",
                  "default": "Redis for LiteLLM"
                }
              }
            },
            "jupyter": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "jupyter"
                },
                "hostname": {
                  "type": "string",
                  "default": "jupyter"
                },
                "port": {
                  "type": "integer",
                  "default": 8888,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 8889,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "jupyter",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "volume": {
                  "type": "string",
                  "default": "jupyter.volume"
                },
                "description": {
                  "type": "string",
                  "default": "Jupyter Lab - Code Interpreter"
                }
              }
            },
            "llama_swap": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "llama-swap"
                },
                "hostname": {
                  "type": "string",
                  "default": "llama-swap"
                },
                "port": {
                  "type": "integer",
                  "default": 8000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 8000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "llama",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "volume": {
                  "type": "string",
                  "default": "llama-swap.volume"
                },
                "description": {
                  "type": "string",
                  "default": "Llama-Swap - Local Model Router"
                }
              }
            },
            "qdrant": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "qdrant"
                },
                "hostname": {
                  "type": "string",
                  "default": "qdrant"
                },
                "port": {
                  "type": "integer",
                  "default": 6333,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 6333,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "qdrant",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "volume": {
                  "type": "string",
                  "default": "qdrant.volume"
                },
                "description": {
                  "type": "string",
                  "default": "Qdrant Vector Database"
                }
              }
            },
            "searxng": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "searxng"
                },
                "hostname": {
                  "type": "string",
                  "default": "searxng"
                },
                "port": {
                  "type": "integer",
                  "default": 8080,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 8080,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "search",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "volume": {
                  "type": "string",
                  "default": "searxng.volume"
                },
                "description": {
                  "type": "string",
                  "default": "SearXNG Meta-Search Engine"
                }
              }
            },
            "searxng_redis": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "searxng-redis"
                },
                "hostname": {
                  "type": "string",
                  "default": "searxng-redis"
                },
                "port": {
                  "type": "integer",
                  "default": 6379,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "default": null
                },
                "bind_address": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "volume": {
                  "type": "string",
                  "default": "searxng-redis.volume"
                },
                "description": {
                  "type": "string",
                  "default": "Redis for SearXNG"
                }
              }
            },
            "tika": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "tika"
                },
                "hostname": {
                  "type": "string",
                  "default": "tika"
                },
                "port": {
                  "type": "integer",
                  "default": 9998,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "default": null
                },
                "bind_address": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "description": {
                  "type": "string",
                  "default": "Apache Tika Document Extraction"
                }
              }
            },
            "whisper": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "whisper"
                },
                "hostname": {
                  "type": "string",
                  "default": "whisper"
                },
                "port": {
                  "type": "integer",
                  "default": 9000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 9000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "whisper",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "description": {
                  "type": "string",
                  "default": "Faster Whisper STT Service"
                }
              }
            },
            "edgetts": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "edgetts"
                },
                "hostname": {
                  "type": "string",
                  "default": "edgetts"
                },
                "port": {
                  "type": "integer",
                  "default": 8000,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 5050,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "tts",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "description": {
                  "type": "string",
                  "default": "Edge TTS - Text-to-Speech Service"
                }
              }
            },
            "comfyui": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "comfyui"
                },
                "hostname": {
                  "type": "string",
                  "default": "comfyui"
                },
                "port": {
                  "type": "integer",
                  "default": 8188,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 8188,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "comfy",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "websocket": {
                  "type": "boolean",
                  "default": true
                },
                "description": {
                  "type": "string",
                  "default": "ComfyUI - Stable Diffusion Workflow Engine"
                }
              }
            },
            "mcp_context_forge": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "mcp-context-forge"
                },
                "hostname": {
                  "type": "string",
                  "default": "mcp-context-forge"
                },
                "port": {
                  "type": "integer",
                  "default": 4444,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": "integer",
                  "default": 4444,
                  "minimum": 1,
                  "maximum": 65535
                },
                "bind_address": {
                  "type": "string",
                  "default": "127.0.0.1",
                  "pattern": "^(\\d{1,3}\\.){3}\\d{1,3}$"
                },
                "external_subdomain": {
                  "type": "string",
                  "default": "mcp",
                  "pattern": "^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
                },
                "data_dir": {
                  "type": "string",
                  "default": "%h/.local/share/mcp-context-forge"
                },
                "config_dir": {
                  "type": "string",
                  "default": "%h/.config/mcp-context-forge"
                },
                "description": {
                  "type": "string",
                  "default": "MCP Context Forge - Enterprise MCP Gateway"
                }
              }
            },
            "mcp_context_forge_postgres": {
              "type": "object",
              "properties": {
                "container_name": {
                  "type": "string",
                  "default": "mcp-context-forge-postgres"
                },
                "hostname": {
                  "type": "string",
                  "default": "mcp-context-forge-postgres"
                },
                "port": {
                  "type": "integer",
                  "default": 5432,
                  "minimum": 1,
                  "maximum": 65535
                },
                "published_port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "default": null
                },
                "bind_address": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "external_subdomain": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "default": null
                },
                "volume": {
                  "type": "string",
                  "default": "mcp-context-forge-postgres.volume"
                },
                "db_name": {
                  "type": "string",
                  "default": "mcp"
                },
                "db_user": {
                  "type": "string",
                  "default": "mcp"
                },
                "description": {
                  "type": "string",
                  "default": "PostgreSQL for MCP Context Forge"
                }
              }
            }
          }
        }
      }
    },
    "features": {
      "type": "object",
      "title": "Feature Toggles",
      "description": "Enable/disable capabilities that have no provider selection (4 boolean decisions). Other features are automatically enabled when their provider is configured.",
      "properties": {
        "title_generation": {
          "type": "boolean",
          "title": "AI Title Generation",
          "default": true,
          "x-category": "AI Assistance",
          "x-display-order": 300
        },
        "autocomplete_generation": {
          "type": "boolean",
          "title": "Autocomplete Generation",
          "default": true,
          "x-category": "AI Assistance",
          "x-display-order": 301
        },
        "tags_generation": {
          "type": "boolean",
          "title": "Tags Generation",
          "default": true,
          "x-category": "AI Assistance",
          "x-display-order": 302
        },
        "websocket_support": {
          "type": "boolean",
          "title": "WebSocket Support",
          "default": true,
          "x-category": "Advanced",
          "x-display-order": 400
        },
        "follow_up_generation": {
          "type": "boolean",
          "title": "Follow-Up Question Suggestions",
          "description": "Generate suggested follow-up questions after each response",
          "default": true,
          "x-category": "AI Assistance",
          "x-display-order": 303
        },
        "evaluation_arena": {
          "type": "boolean",
          "title": "Model Comparison Arena",
          "description": "Enable side-by-side model comparison for evaluation",
          "default": true,
          "x-category": "AI Assistance",
          "x-display-order": 304
        },
        "message_rating": {
          "type": "boolean",
          "title": "Message Rating",
          "description": "Allow rating individual messages for quality feedback",
          "default": true,
          "x-category": "AI Assistance",
          "x-display-order": 305
        },
        "community_sharing": {
          "type": "boolean",
          "title": "Community Sharing",
          "description": "Show share-to-community button for conversations",
          "default": true,
          "x-category": "Social",
          "x-display-order": 306
        }
      }
    },
    "providers": {
      "type": "object",
      "title": "Provider Selections",
      "description": "Choose implementation for each feature (13 enum decisions)",
      "properties": {
        "vector_db": {
          "type": "string",
          "title": "Vector Database (enables RAG)",
          "description": "Selecting a vector database automatically enables RAG functionality",
          "enum": [
            "",
            "pgvector",
            "qdrant",
            "chroma"
          ],
          "default": "",
          "x-category": "Providers",
          "x-display-order": 100
        },
        "rag_embedding": {
          "type": "string",
          "title": "RAG Embedding Model",
          "description": "Only used when vector_db is configured",
          "enum": [
            "openai",
            "ollama"
          ],
          "default": "openai",
          "x-category": "Providers",
          "x-display-order": 101
        },
        "content_extraction": {
          "type": "string",
          "title": "Content Extraction Engine",
          "description": "Only used when vector_db is configured",
          "enum": [
            "tika",
            "docling"
          ],
          "default": "tika",
          "x-category": "Providers",
          "x-display-order": 102
        },
        "text_splitter": {
          "type": "string",
          "title": "Text Splitter Algorithm",
          "description": "Only used when vector_db is configured",
          "enum": [
            "character",
            "recursive",
            "token",
            "markdown_header"
          ],
          "default": "recursive",
          "x-category": "Providers",
          "x-display-order": 103
        },
        "web_search_engine": {
          "type": "string",
          "title": "Web Search Engine (enables Web Search)",
          "description": "Selecting a search engine automatically enables Web Search functionality",
          "enum": [
            "",
            "searxng",
            "tavily",
            "brave",
            "google_pse",
            "serper",
            "serpapi",
            "bing"
          ],
          "default": "",
          "x-category": "Providers",
          "x-display-order": 110
        },
        "web_loader": {
          "type": "string",
          "title": "Web Page Loader",
          "description": "Only used when web_search_engine is configured",
          "enum": [
            "requests",
            "selenium",
            "playwright",
            "safe_web"
          ],
          "default": "requests",
          "x-category": "Providers",
          "x-display-order": 111
        },
        "image_engine": {
          "type": "string",
          "title": "Image Generation Engine (enables Image Generation)",
          "description": "Selecting an image engine automatically enables Image Generation functionality",
          "enum": [
            "",
            "openai",
            "automatic1111",
            "comfyui",
            "gemini"
          ],
          "default": "",
          "x-category": "Providers",
          "x-display-order": 120
        },
        "stt_engine": {
          "type": "string",
          "title": "Speech-to-Text Engine (enables STT)",
          "description": "Selecting a STT engine automatically enables Speech-to-Text functionality",
          "enum": [
            "",
            "openai",
            "whisper",
            "azure",
            "deepgram"
          ],
          "default": "",
          "x-category": "Providers",
          "x-display-order": 130
        },
        "tts_engine": {
          "type": "string",
          "title": "Text-to-Speech Engine (enables TTS)",
          "description": "Selecting a TTS engine automatically enables Text-to-Speech functionality",
          "enum": [
            "",
            "openai",
            "elevenlabs",
            "edgetts",
            "azure"
          ],
          "default": "",
          "x-category": "Providers",
          "x-display-order": 131
        },
        "code_execution_engine": {
          "type": "string",
          "title": "Code Execution Engine (enables Code Execution)",
          "description": "Selecting a code execution engine automatically enables Code Execution functionality",
          "enum": [
            "",
            "jupyter",
            "pyodide"
          ],
          "default": "",
          "x-category": "Providers",
          "x-display-order": 140
        },
        "storage_provider": {
          "type": "string",
          "title": "External Storage Provider",
          "enum": [
            "",
            "s3",
            "gcs"
          ],
          "default": "",
          "x-category": "Providers",
          "x-display-order": 150
        },
        "auth_provider": {
          "type": "string",
          "title": "Authentication Provider",
          "enum": [
            "local",
            "oauth",
            "ldap"
          ],
          "default": "local",
          "x-category": "Security",
          "x-display-order": 200
        }
      }
    },
    "provider_config": {
      "type": "object",
      "title": "Provider Configuration",
      "description": "Configuration fields for selected providers (including advanced parameters)",
      "properties": {
        "webui_name": {
          "type": "string",
          "title": "WebUI Instance Name",
          "description": "The name displayed in the interface header (e.g., 'Leger AI', 'My Company AI')",
          "default": "Leger AI",
          "x-category": "Core",
          "x-display-order": 10
        },
        "custom_name": {
          "type": "string",
          "title": "Custom Instance Label",
          "description": "Optional label for the instance (e.g., 'Dev', 'Staging', 'Production')",
          "default": "",
          "x-category": "Core",
          "x-display-order": 11
        },
        "default_locale": {
          "type": "string",
          "title": "Default UI Language",
          "description": "Two-letter ISO 639-1 language code for the interface",
          "default": "en",
          "enum": [
            "en",
            "es",
            "fr",
            "de",
            "zh",
            "ja",
            "ko",
            "pt",
            "ru",
            "ar"
          ],
          "x-category": "Core",
          "x-display-order": 12
        },
        "qdrant_url": {
          "type": "string",
          "title": "Qdrant URL",
          "default": "http://qdrant:6333",
          "format": "uri",
          "x-depends-on": {
            "providers.vector_db": "qdrant"
          },
          "x-category": "Providers",
          "x-display-order": 100
        },
        "qdrant_api_key": {
          "type": "string",
          "title": "Qdrant API Key",
          "default": "",
          "x-depends-on": {
            "providers.vector_db": "qdrant"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 101
        },
        "qdrant_grpc_port": {
          "type": "integer",
          "title": "Qdrant gRPC Port",
          "default": 6334,
          "minimum": 1,
          "maximum": 65535,
          "x-depends-on": {
            "providers.vector_db": "qdrant"
          },
          "x-category": "Providers",
          "x-display-order": 102
        },
        "qdrant_prefer_grpc": {
          "type": "boolean",
          "title": "Prefer gRPC",
          "default": false,
          "x-depends-on": {
            "providers.vector_db": "qdrant"
          },
          "x-category": "Providers",
          "x-display-order": 103
        },
        "qdrant_on_disk": {
          "type": "boolean",
          "title": "Store on Disk",
          "default": true,
          "x-depends-on": {
            "providers.vector_db": "qdrant"
          },
          "x-category": "Providers",
          "x-display-order": 104
        },
        "chroma_tenant": {
          "type": "string",
          "title": "ChromaDB Tenant",
          "description": "ChromaDB multitenancy tenant name",
          "default": "default_tenant",
          "x-depends-on": {
            "providers.vector_db": "chroma"
          },
          "x-category": "Providers",
          "x-display-order": 105
        },
        "chroma_database": {
          "type": "string",
          "title": "ChromaDB Database",
          "description": "ChromaDB database name",
          "default": "default_database",
          "x-depends-on": {
            "providers.vector_db": "chroma"
          },
          "x-category": "Providers",
          "x-display-order": 106
        },
        "rag_embedding_api_key": {
          "type": "string",
          "title": "RAG Embedding API Key",
          "default": "",
          "x-depends-on": {
            "providers.rag_embedding": "openai"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 110
        },
        "rag_embedding_model": {
          "type": "string",
          "title": "RAG Embedding Model",
          "description": "Model ID for RAG embeddings. Must be an embedding model from model-store. Only used when vector_db is configured with rag_embedding=openai.",
          "default": "qwen3-embedding-8b",
          "examples": [
            "qwen3-embedding-8b",
            "nomic-embed-text-v1.5"
          ],
          "x-depends-on": {
            "providers.rag_embedding": "openai"
          },
          "x-model-reference": true,
          "x-auto-install": true,
          "x-group-filter": "embeddings",
          "x-category": "Providers",
          "x-display-order": 111
        },
        "ollama_embedding_model": {
          "type": "string",
          "title": "Ollama Embedding Model",
          "description": "Model ID for Ollama embeddings (if using native Ollama daemon). Only used when vector_db is configured with rag_embedding=ollama.",
          "default": "nomic-embed-text-v1.5",
          "examples": [
            "nomic-embed-text-v1.5",
            "qwen3-embedding-8b"
          ],
          "x-depends-on": {
            "providers.rag_embedding": "ollama"
          },
          "x-model-reference": true,
          "x-auto-install": true,
          "x-group-filter": "embeddings",
          "x-category": "Providers",
          "x-display-order": 112
        },
        "tika_server_url": {
          "type": "string",
          "title": "Tika Server URL",
          "default": "http://tika:9998",
          "format": "uri",
          "x-depends-on": {
            "providers.content_extraction": "tika"
          },
          "x-category": "Providers",
          "x-display-order": 120
        },
        "searxng_query_url": {
          "type": "string",
          "title": "SearXNG Query URL",
          "default": "http://searxng:8080/search?q=<query>",
          "format": "uri",
          "x-depends-on": {
            "providers.web_search_engine": "searxng"
          },
          "x-category": "Providers",
          "x-display-order": 130
        },
        "tavily_api_key": {
          "type": "string",
          "title": "Tavily API Key",
          "default": "",
          "x-depends-on": {
            "providers.web_search_engine": "tavily"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 140
        },
        "brave_api_key": {
          "type": "string",
          "title": "Brave Search API Key",
          "default": "",
          "x-depends-on": {
            "providers.web_search_engine": "brave"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 150
        },
        "stt_api_key": {
          "type": "string",
          "title": "STT API Key",
          "default": "",
          "x-depends-on": {
            "providers.stt_engine": "openai"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 180
        },
        "audio_stt_model": {
          "type": "string",
          "title": "STT Model",
          "description": "OpenAI STT model (e.g., whisper-1)",
          "default": "whisper-1",
          "x-depends-on": {
            "providers.stt_engine": "openai"
          },
          "x-category": "Providers",
          "x-display-order": 181
        },
        "elevenlabs_api_key": {
          "type": "string",
          "title": "ElevenLabs API Key",
          "default": "",
          "x-depends-on": {
            "providers.tts_engine": "elevenlabs"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 200
        },
        "tts_api_key": {
          "type": "string",
          "title": "TTS API Key",
          "default": "",
          "x-depends-on": {
            "providers.tts_engine": "openai"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 210
        },
        "audio_tts_model": {
          "type": "string",
          "title": "TTS Model",
          "description": "OpenAI TTS model (e.g., tts-1, tts-1-hd)",
          "default": "tts-1",
          "x-depends-on": {
            "providers.tts_engine": "openai"
          },
          "x-category": "Providers",
          "x-display-order": 211
        },
        "audio_tts_voice": {
          "type": "string",
          "title": "TTS Voice",
          "description": "OpenAI TTS voice (alloy, echo, fable, onyx, nova, shimmer)",
          "default": "alloy",
          "enum": [
            "alloy",
            "echo",
            "fable",
            "onyx",
            "nova",
            "shimmer"
          ],
          "x-depends-on": {
            "providers.tts_engine": "openai"
          },
          "x-category": "Providers",
          "x-display-order": 212
        },
        "e2b_api_key": {
          "type": "string",
          "title": "E2B API Key",
          "default": "",
          "x-depends-on": {
            "providers.code_interpreter_engine": "e2b"
          },
          "x-sensitive": true,
          "x-category": "Providers",
          "x-display-order": 230
        },
        "rag_top_k": {
          "type": "integer",
          "title": "RAG Top K",
          "description": "Only used when vector_db is configured",
          "default": 5,
          "minimum": 1,
          "maximum": 50,
          "x-category": "Advanced",
          "x-display-order": 500
        },
        "chunk_size": {
          "type": "integer",
          "title": "Chunk Size",
          "description": "Only used when vector_db is configured",
          "default": 1500,
          "minimum": 100,
          "maximum": 10000,
          "x-category": "Advanced",
          "x-display-order": 501
        },
        "chunk_overlap": {
          "type": "integer",
          "title": "Chunk Overlap",
          "description": "Only used when vector_db is configured",
          "default": 100,
          "minimum": 0,
          "maximum": 1000,
          "x-category": "Advanced",
          "x-display-order": 502
        },
        "rag_embedding_trust_remote_code": {
          "type": "boolean",
          "title": "Trust Remote Code (Embeddings)",
          "description": "Allow custom HuggingFace embedding models with remote code execution",
          "default": false,
          "x-depends-on": {
            "providers.vector_db": [
              "pgvector",
              "qdrant",
              "chroma"
            ]
          },
          "x-category": "Advanced",
          "x-display-order": 503
        },
        "rag_reranking_trust_remote_code": {
          "type": "boolean",
          "title": "Trust Remote Code (Reranking)",
          "description": "Allow custom HuggingFace reranking models with remote code execution",
          "default": false,
          "x-depends-on": {
            "providers.vector_db": [
              "pgvector",
              "qdrant",
              "chroma"
            ]
          },
          "x-category": "Advanced",
          "x-display-order": 504
        },
        "rag_embedding_auto_update": {
          "type": "boolean",
          "title": "Auto-Update Embedding Models",
          "description": "Automatically update embedding models from HuggingFace",
          "default": true,
          "x-depends-on": {
            "providers.vector_db": [
              "pgvector",
              "qdrant",
              "chroma"
            ]
          },
          "x-category": "Advanced",
          "x-display-order": 505
        },
        "rag_reranking_auto_update": {
          "type": "boolean",
          "title": "Auto-Update Reranking Models",
          "description": "Automatically update reranking models from HuggingFace",
          "default": true,
          "x-depends-on": {
            "providers.vector_db": [
              "pgvector",
              "qdrant",
              "chroma"
            ]
          },
          "x-category": "Advanced",
          "x-display-order": 506
        },
        "task_model_title": {
          "type": "string",
          "title": "Task Model: Title Generation",
          "description": "Model ID for generating chat titles (ultra-fast, <1B params). Must exist in model-store.",
          "default": "qwen3-0.6b",
          "examples": [
            "qwen3-0.6b",
            "gpt-5-nano"
          ],
          "x-depends-on": {
            "features.title_generation": true
          },
          "x-model-reference": true,
          "x-auto-install": true,
          "x-category": "Advanced",
          "x-display-order": 301
        },
        "task_model_tags": {
          "type": "string",
          "title": "Task Model: Tags Generation",
          "description": "Model ID for generating conversation tags (balanced, 3-4B params). Must exist in model-store.",
          "default": "qwen3-4b",
          "examples": [
            "qwen3-4b",
            "gpt-5-mini"
          ],
          "x-depends-on": {
            "features.tags_generation": true
          },
          "x-model-reference": true,
          "x-auto-install": true,
          "x-category": "Advanced",
          "x-display-order": 302
        },
        "task_model_autocomplete": {
          "type": "string",
          "title": "Task Model: Autocomplete Generation",
          "description": "Model ID for autocomplete suggestions (ultra-fast, <1B params). Must exist in model-store.",
          "default": "qwen3-0.6b",
          "examples": [
            "qwen3-0.6b",
            "gpt-5-nano"
          ],
          "x-depends-on": {
            "features.autocomplete_generation": true
          },
          "x-model-reference": true,
          "x-auto-install": true,
          "x-category": "Advanced",
          "x-display-order": 303
        },
        "autocomplete_input_max_length": {
          "type": "integer",
          "title": "Autocomplete Max Input Length",
          "description": "Maximum input length for autocomplete suggestions (-1 = unlimited)",
          "default": -1,
          "minimum": -1,
          "maximum": 10000,
          "x-depends-on": {
            "features.autocomplete_generation": true
          },
          "x-category": "Advanced",
          "x-display-order": 307
        },
        "task_model_query": {
          "type": "string",
          "title": "Task Model: Query Generation",
          "description": "Model ID for RAG query rewriting (balanced, 3-4B params). Must exist in model-store. Only used when vector_db is configured.",
          "default": "qwen3-4b",
          "examples": [
            "qwen3-4b",
            "gpt-5-mini"
          ],
          "x-model-reference": true,
          "x-auto-install": true,
          "x-category": "Advanced",
          "x-display-order": 304
        },
        "task_model_search_query": {
          "type": "string",
          "title": "Task Model: Search Query Generation",
          "description": "Model ID for web search query generation. Must exist in model-store. Only used when web_search_engine is configured.",
          "default": "qwen3-4b",
          "examples": [
            "qwen3-4b",
            "gpt-5-mini"
          ],
          "x-model-reference": true,
          "x-auto-install": true,
          "x-category": "Advanced",
          "x-display-order": 305
        },
        "task_model_rag_template": {
          "type": "string",
          "title": "Task Model: RAG Template Generation",
          "description": "Model ID for RAG template generation. Must exist in model-store. Only used when vector_db is configured.",
          "default": "qwen3-4b",
          "examples": [
            "qwen3-4b",
            "gpt-5-mini"
          ],
          "x-model-reference": true,
          "x-auto-install": true,
          "x-category": "Advanced",
          "x-display-order": 306
        },
        "log_level": {
          "type": "string",
          "title": "Log Level",
          "description": "Logging verbosity for OpenWebUI",
          "default": "INFO",
          "enum": [
            "DEBUG",
            "INFO",
            "WARNING",
            "ERROR"
          ],
          "x-category": "Advanced",
          "x-display-order": 601
        },
        "redis_key_prefix": {
          "type": "string",
          "title": "Redis Key Prefix",
          "description": "Redis namespace prefix for OpenWebUI",
          "default": "open-webui",
          "x-category": "Advanced",
          "x-display-order": 610
        },
        "cache_control": {
          "type": "string",
          "title": "HTTP Cache Control Header",
          "description": "Set cache control policy for HTTP responses (e.g., 'public, max-age=3600')",
          "default": "",
          "x-category": "Advanced",
          "x-display-order": 611
        },
        "openwebui_timeout_start": {
          "type": "integer",
          "title": "OpenWebUI Startup Timeout",
          "default": 900,
          "minimum": 60,
          "maximum": 1800,
          "x-category": "Advanced",
          "x-display-order": 600
        }
      }
    },
    "secrets": {
      "type": "object",
      "title": "External API Secrets",
      "description": "Real external cloud provider API keys that users must register for and securely store. These NEVER contain actual values - only {PLACEHOLDER} patterns. Internal service keys (LiteLLM master key, OpenWebUI secret, etc.) are NOT secrets - they're hardcoded for inter-service communication.",
      "x-category": "Security",
      "x-display-order": 500,
      "properties": {
        "openai_api_key": {
          "type": "string",
          "title": "OpenAI API Key",
          "description": "OpenAI API key for GPT models, embeddings, and speech services. Register at https://platform.openai.com/api-keys",
          "default": "{OPENAI_API_KEY}",
          "x-sensitive": true
        },
        "anthropic_api_key": {
          "type": "string",
          "title": "Anthropic API Key",
          "description": "Anthropic API key for Claude models. Register at https://console.anthropic.com/",
          "default": "{ANTHROPIC_API_KEY}",
          "x-sensitive": true
        },
        "gemini_api_key": {
          "type": "string",
          "title": "Google Gemini API Key",
          "description": "Google Gemini API key for Gemini models. Register at https://makersuite.google.com/app/apikey",
          "default": "{GEMINI_API_KEY}",
          "x-sensitive": true
        },
        "groq_api_key": {
          "type": "string",
          "title": "Groq API Key",
          "description": "Groq API key for fast inference. Register at https://console.groq.com/",
          "default": "{GROQ_API_KEY}",
          "x-sensitive": true
        },
        "mistral_api_key": {
          "type": "string",
          "title": "Mistral API Key",
          "description": "Mistral API key for Mistral models. Register at https://console.mistral.ai/",
          "default": "{MISTRAL_API_KEY}",
          "x-sensitive": true
        },
        "openrouter_api_key": {
          "type": "string",
          "title": "OpenRouter API Key",
          "description": "OpenRouter API key for unified model access. Register at https://openrouter.ai/keys",
          "default": "{OPENROUTER_API_KEY}",
          "x-sensitive": true
        },
        "perplexity_api_key": {
          "type": "string",
          "title": "Perplexity API Key",
          "description": "Perplexity API key for Perplexity models and search. Register at https://www.perplexity.ai/settings/api",
          "default": "{PERPLEXITY_API_KEY}",
          "x-sensitive": true
        },
        "tavily_api_key": {
          "type": "string",
          "title": "Tavily Search API Key",
          "description": "Tavily API key for AI-powered web search. Register at https://tavily.com/",
          "default": "{TAVILY_API_KEY}",
          "x-sensitive": true
        },
        "hf_token": {
          "type": "string",
          "title": "HuggingFace API Token",
          "description": "HuggingFace token for model downloads. Register at https://huggingface.co/settings/tokens",
          "default": "{HF_TOKEN}",
          "x-sensitive": true
        },
        "civitai_token": {
          "type": "string",
          "title": "CivitAI API Token",
          "description": "CivitAI token for model downloads. Register at https://civitai.com/user/account",
          "default": "{CIVITAI_TOKEN}",
          "x-sensitive": true
        }
      }
    }
  }
}
